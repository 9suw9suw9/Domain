<%- include('partials/head') %>

<main class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>Configuration</h1>
        <div>
            <button class="btn btn-primary" onclick="saveConfiguration()">Save Configuration</button>
            <button class="btn btn-info" onclick="loadCurrentConfig()">Reload Configuration</button>
        </div>
    </div>
    <div id="alert-container"></div>

    <form id="configForm">
        
        <div class="card mb-3">
            <div class="card-header">Core Bot Settings</div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="discordToken" class="form-label">Discord Token</label>
                    <input type="password" class="form-control" id="discordToken" placeholder="Enter Discord Token">
                    <small class="form-text text-muted">Current token will be hidden for security if set.</small>
                </div>
                <div class="mb-3">
                    <label for="geminiAPIKey" class="form-label">Gemini API Key</label>
                    <input type="password" class="form-control" id="geminiAPIKey" placeholder="Enter Gemini API Key">
                    <small class="form-text text-muted">Current API key will be hidden for security if set.</small>
                </div>
                <div class="mb-3">
                    <label for="geminiModel" class="form-label">Gemini Model ID</label>
                    <input type="text" class="form-control" id="geminiModel" placeholder="e.g., gemini-1.5-flash-latest">
                </div>
                <div class="mb-3">
                    <label class="form-label">Aliases</label>
                    <div id="aliasesContainer">
                        
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addAliasInput()">Add Alias</button>
                </div>
            </div>
        </div>

        
        <div class="card mb-3">
            <div class="card-header">Channel & Content Settings</div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">Channel IDs</label>
                    <div id="channelsContainer">
                        
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addChannelInput()">Add Channel ID</button>
                </div>
                <div class="mb-3">
                    <label class="form-label">Prompt Paths</label>
                    <div id="promptPathsContainer">
                        
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addPromptPathMapping()">Add Prompt Mapping</button>
                </div>
                <div class="mb-3">
                    <label class="form-label">Wiki URLs</label>
                    <div id="wikiUrlsContainer">
                        
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addWikiUrlMapping()">Add Wiki URL Mapping</button>
                </div>
            </div>
        </div>

        
        <div class="card mb-3">
            <div class="card-header">Behavior & Operational Settings</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="locale" class="form-label">Locale</label>
                        <input type="text" class="form-control" id="locale" placeholder="e.g., en-US">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="maxMessages" class="form-label">Max Messages in History</label>
                        <input type="number" class="form-control" id="maxMessages" placeholder="e.g., 200">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="sleepingRange" class="form-label">Sleeping Range</label>
                        <input type="text" class="form-control" id="sleepingRange" placeholder="e.g., 22:00-06:00">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="cumulativeMode" class="form-label">Cumulative Mode</label>
                        <select class="form-control" id="cumulativeMode">
                            <option value="classic">Classic</option>
                            <option value="noise">Noise</option>
                            <option value="worse">Worse</option>
                        </select>
                    </div>
                </div>
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="enableThinking">
                    <label class="form-check-label" for="enableThinking">Enable Thinking Capabilities</label>
                </div>
            </div>
        </div>
        
        
        <div class="card mb-3">
            <div class="card-header">Advanced Settings</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="webuiPort" class="form-label">WebUI Port</label>
                        <input type="number" class="form-control" id="webuiPort" placeholder="e.g., 4500">
                    </div>
                     <div class="col-md-6 mb-3">
                        <label for="searxBaseUrl" class="form-label">SearX Base URL</label>
                        <input type="url" class="form-control" id="searxBaseUrl" placeholder="e.g., https://searx.example.com">
                    </div>
                </div>
                <div class="mb-3">
                    <label for="tosUrl" class="form-label">Terms of Service URL</label>
                    <input type="url" class="form-control" id="tosUrl" placeholder="e.g., https://example.com/terms">
                </div>

                <div class="mb-3">
                    <label class="form-label">Owner User IDs</label>
                    <div id="ownersContainer">
                        
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addOwnerInput()">Add Owner ID</button>
                </div>

                <div class="mb-3">
                    <label class="form-label">Timings (in seconds)</label>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="timingSaveReps" class="form-label">Save Reps Interval</label>
                            <input type="number" class="form-control" id="timingSaveReps" placeholder="e.g., 120">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="timingResetPrompt" class="form-label">Reset Prompt Interval</label>
                            <input type="number" class="form-control" id="timingResetPrompt" placeholder="e.g., 600">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="timingUserCacheDuration" class="form-label">User Cache Duration</label>
                            <input type="number" class="form-control" id="timingUserCacheDuration" placeholder="e.g., 3600000">
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Emojis (Emoji IDs)</label>
                    <div class="row">
                        <div class="col-md-4 mb-2"><label for="emojiUploaded" class="form-label">Uploaded</label><input type="text" class="form-control" id="emojiUploaded"></div>
                        <div class="col-md-4 mb-2"><label for="emojiUpvote" class="form-label">Upvote</label><input type="text" class="form-control" id="emojiUpvote"></div>
                        <div class="col-md-4 mb-2"><label for="emojiDownvote" class="form-label">Downvote</label><input type="text" class="form-control" id="emojiDownvote"></div>
                        <div class="col-md-4 mb-2"><label for="emojiSearch" class="form-label">Search</label><input type="text" class="form-control" id="emojiSearch"></div>
                        <div class="col-md-4 mb-2"><label for="emojiMute" class="form-label">Mute</label><input type="text" class="form-control" id="emojiMute"></div>
                        <div class="col-md-4 mb-2"><label for="emojiUploading" class="form-label">Uploading</label><input type="text" class="form-control" id="emojiUploading"></div>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Remote Block Lists (URLs)</label>
                    <div id="remoteListsContainer">
                        
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addRemoteListInput()">Add Remote List URL</button>
                </div>
            </div>
        </div>

        
        <div class="card mb-3">
            <div class="card-header">Proxies</div>
            <div class="card-body">
                <div id="proxiesContainer">
                    
                </div>
                <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="addProxyInput()">Add Proxy</button>
            </div>
        </div>
    </form>

    <div class="my-4">
        <button class="btn btn-primary" onclick="saveConfiguration()">Save Configuration</button>
        <button class="btn btn-info" onclick="loadCurrentConfig()">Reload Configuration</button>
    </div>

</main>

<script src="/js/configuration.js"></script>
<%- include('partials/footer') %>